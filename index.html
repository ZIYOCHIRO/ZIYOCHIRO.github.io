<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  

  

  

  

  

  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/32icon.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/16icon.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="My blogs">
<meta property="og:type" content="website">
<meta property="og:title" content="Ziyochiro&#39;s Blogs">
<meta property="og:url" content="https:&#x2F;&#x2F;ziyochiro.github.io&#x2F;index.html">
<meta property="og:site_name" content="Ziyochiro&#39;s Blogs">
<meta property="og:description" content="My blogs">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://ziyochiro.github.io/"/>





  <title>Ziyochiro's Blogs</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta custom-logo">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Ziyochiro's Blogs</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Duck Duck go go go</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ziyochiro.github.io/2019/12/21/Design-Patterns-All-in-One/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ziyochiro">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ziyochiro's Blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/21/Design-Patterns-All-in-One/" itemprop="url">Design Patterns All in One</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-21T09:14:07+08:00">
                2019-12-21
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2019-12-21T09:14:07+08:00">
                2019-12-21
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/swift/" itemprop="url" rel="index">
                    <span itemprop="name">swift</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Reference: <em>Design Pattern by Tutorials</em>, by Joshau Greene &amp; Jay Strawn</p>
</blockquote>
<p><strong>Types of design patterns</strong>:</p>
<blockquote>
<ul>
<li>Structual design pattern: Describes how objects are composed and combined to form large structrues. —[Model-View-Controller(MVC), Model-View-View-Model(MVVM), Facade]</li>
<li>Behavior design pattern: Describes how objects communicate with each other. —[Delegation, Observer, Strategy]</li>
<li>Creational design pattern: Describes how to create or instantiate objects. [Builder, Singleton and Prototype]</li>
</ul>
</blockquote>
<h3 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h3><p><img src="https://i.imgur.com/FSDs6sd.png" alt="Imgur"></p>
<ul>
<li><strong>Models</strong> hold application data. They are usually structs or simple classes.</li>
<li><strong>Views</strong> display visual elements and controls on screen. They are usually subclasses of UIView.</li>
<li><strong>Controllers</strong> coordinate between models and views. They are usually subclasses of UIViewController.</li>
</ul>
<p>Controllers are allowed to have strong properties for their model and view so they can be accessed directly. Conversely, models and views should not hold a strong reference to their owning controller. This would cause a retain cycle.</p>
<hr>
<h3 id="Delegation-Pattern"><a href="#Delegation-Pattern" class="headerlink" title="Delegation Pattern"></a>Delegation Pattern</h3><p>The delegation pattern enables an object to use another “helper” object to provide data or perform a task rather than do the task itself.<br><img src="https://i.imgur.com/m32zkta.png" alt="Imgur"></p>
<ul>
<li>An <strong>object</strong> needing a delegate, also known as the delegation object. It’s the object that has a delegate. The delegate is usually held as a weak property to avoid a retain cycle.</li>
<li>A <strong>delegation protocol</strong>, which defines the methods a delegate may or should implement.</li>
<li>A <strong>delegate</strong>, which is the helper object that implements the delegate protocol.</li>
</ul>
<p>Most often, delegate properties should be weak. If you find yourself tempted to create a strong delegate, anther design pattern may be better suited for your case, you might consider using the strategy pattern instead.</p>
<hr>
<h3 id="Strategy-Pattern"><a href="#Strategy-Pattern" class="headerlink" title="Strategy Pattern"></a>Strategy Pattern</h3><p>The strategy pattern defines a family of interchangeable objects that can be set or switched at runtime.<br><img src="https://i.imgur.com/IapBqzk.png" alt="Imgur"></p>
<ul>
<li>The <strong>object using a strategy</strong>. This most often a view controller when the pattern is used in iOS app development, but it can technically be any kind of object that needs interchangeable behavior.</li>
<li>The <strong>strategy protocol</strong> defines methods that every strategy must implement.</li>
<li>The <strong>strategies</strong> are objects that comform to the strategy protocol.</li>
</ul>
<p>Use the strategy pattern when you have two or more difficult behaviors that are interchangeable. This pattern is similar to the delegation pattern: both patterns rely on a protocol instead of concrete objects.<br>Delegations are often fixed at runtime. For example, the dataSource and delegate for a UITableVeiw can be set from Interface Builder, and it’s rare for these to change during runtime. Strategies, however, are intended to be easily interchangeable at runtime.<br> <strong>Eample</strong>:<br> <strong>strategy protocol</strong>–MovieRatingStrategy</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">protocol</span> <span class="title">MovieRatingStrategy</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1</span></span><br><span class="line">    <span class="keyword">var</span> ratingServiceName: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="comment">// 2</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">fetchRating</span><span class="params">(<span class="keyword">for</span> movieTitle: String, success: <span class="params">(<span class="number">_</span> rating: String, <span class="number">_</span> review: String)</span></span></span> -&gt; ())</span><br><span class="line">&#125;</span><br><span class="line">strategies—<span class="type">RottenTomatoesClient</span> &amp; <span class="type">IMDbClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RottenTomatoesClient</span>: <span class="title">MovieRatingStrategy</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> ratingServiceName = <span class="string">"Rotten Tomatoes"</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">fetchRating</span><span class="params">(<span class="keyword">for</span> movieTitle: String,success: <span class="params">(<span class="number">_</span> rating: String, <span class="number">_</span> review: String)</span></span></span> -&gt; ()) &#123;</span><br><span class="line">        <span class="keyword">let</span> rating = <span class="string">"95%"</span></span><br><span class="line">        <span class="keyword">let</span> review = <span class="string">"It rocked!"</span></span><br><span class="line">        success(rating, review)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IMDbClient</span>: <span class="title">MovieRatingStrategy</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> ratingServiceName = <span class="string">"IMDb"</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">fetchRating</span><span class="params">(<span class="keyword">for</span> movieTitle: String,success: <span class="params">(<span class="number">_</span> rating: String, <span class="number">_</span> review: String)</span></span></span> -&gt; ()) &#123;</span><br><span class="line">        <span class="keyword">let</span> rating = <span class="string">"3 / 10"</span></span><br><span class="line">        <span class="keyword">let</span> review = <span class="string">"It was terrible! The audience was throwing rotten tomatoes!"</span></span><br><span class="line">        success(rating, review)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> <strong>object using a strategy</strong>—MoviewRatingViewController</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MoviewRatingViewController</span>: <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> movieRatingClient: <span class="type">MovieRatingStrategy!</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">public</span> <span class="keyword">var</span> movieTitleTextField: <span class="type">UITextField!</span></span><br><span class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">public</span> <span class="keyword">var</span> ratingServiceNameLabel: <span class="type">UILabel!</span></span><br><span class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">public</span> <span class="keyword">var</span> ratingLabel: <span class="type">UILabel!</span></span><br><span class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">public</span> <span class="keyword">var</span> reviewLabel: <span class="type">UILabel!</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123; </span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad() </span><br><span class="line">        ratingServiceNameLabel.text = movieRatingClient.ratingServiceName </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@IBAction</span> <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">searchButtonPressed</span><span class="params">(sender: <span class="keyword">Any</span>)</span></span> &#123; </span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> movieTitle = movieTitleTextField.text <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">        movieRatingClient.fetchRating(<span class="keyword">for</span>: movieTitle) &#123; (rating, review) <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">self</span>.ratingLabel.text = rating <span class="keyword">self</span>.reviewLabel.text = review</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Whenever this view controller is instantiated within the app, you’d need to set the movieRatingClient. Notice how the view contorller doesn’t know about the concrete implementations of <code>MovieRatingStrategy</code>. The determination of which <code>MovieRatingStrategy</code> to use can be deferred unitl runtime.</p>
<hr>
<h3 id="Singleton-Pattern"><a href="#Singleton-Pattern" class="headerlink" title="Singleton Pattern"></a>Singleton Pattern</h3><p>The singleton pattern restricts a class to only one instance. Every reference to the class refers to the same underlying instance.<br><img src="https://i.imgur.com/og9fUm9.png" alt="Imgur"></p>
<p>Use the singleton pattern when having more than one instance of a class would cause problems, or when it just wouldn’t be logical.<br>The “singleton plus” pattern is also common, which provides a shared singleton instance that allows other instances to be created, too.<br>Use the singleton plus pattern if a shared instance is useful most of the time, but you also want to allow custom instances to be created. An example of this is FileManager. There is a “default” instance which is a singleton, or you can create your own. You would usually create your own if you’re using it on a background thread.<br><strong>Example</strong>:<br><strong>Singleton</strong>:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit </span><br><span class="line"> <span class="keyword">let</span> app = <span class="type">UIApplication</span>.shared</span><br><span class="line"> <span class="comment">// let app2 = UIApplication() </span></span><br><span class="line"> <span class="comment">// Error: You'll get a compiler error! UIApplication doesn't allow more than one instance to be created.</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MySingleton</span> </span>&#123;</span><br><span class="line">     <span class="keyword">static</span> <span class="keyword">let</span> shared = <span class="type">MySingleton</span>()</span><br><span class="line">     <span class="keyword">private</span> <span class="keyword">init</span>() &#123;&#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">let</span> mySingleton = <span class="type">MySingleton</span>.shared</span><br><span class="line"><span class="comment">// let mySingleton2 = MySingleton()</span></span><br><span class="line"><span class="comment">// Error: You'll get a compiler error if you try to create additional instances of MySingleton</span></span><br></pre></td></tr></table></figure>
<p><strong>Singleton Plus</strong>:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> defaultFileManager = <span class="type">FileManager</span>.<span class="keyword">default</span></span><br><span class="line"><span class="keyword">let</span> customFileManager = <span class="type">FileManager</span>()</span><br><span class="line"><span class="comment">// You're allowed to create new instance of FileManger. This proves that it's using the singleton plus pattern!</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MySingletonPlus</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> shared = <span class="type">MySingletonPlus</span>()</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>() &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> singletonPlus = <span class="type">MySingletonPlus</span>.shared</span><br><span class="line"><span class="keyword">let</span> singletonPlus2 = <span class="type">MySingletonPlus</span>()</span><br></pre></td></tr></table></figure>
<p>Singleton Plus is very similar to a true Singleton:</p>
<ol>
<li>You declare a shared static property just like a singleton. </li>
<li>Unlike a true singleton, you declare init as public to allow additional instances to be created.</li>
<li>You get the sinleton instance by calling MySingletonPlus.shared.</li>
<li>You can also create new intances, too.</li>
</ol>
<p>Be careful about overusing this pattern! Before you create a singleton, consider other ways to solve the problem without it. If a singleton really is best, prefer to use a singleton plus over a singleton.</p>
<hr>
<h3 id="Observer-Pattern"><a href="#Observer-Pattern" class="headerlink" title="Observer Pattern"></a>Observer Pattern</h3><p>The observer pattern lets one object observe changes on another object. You’ll learn two different ways to implement the observer pattern in this chapter: Using key value observation(KVO), and using an Observation wrapper.<br><img src="https://i.imgur.com/FbQ1R9S.png" alt="Imgur"></p>
<ol>
<li>The <strong>subject</strong> is the object that’s being observed.</li>
<li>The <strong>observer</strong> is the object doing the observing.</li>
</ol>
<p>Use the observer pattern whenever you want to receive changes made on another object.<br>The pattern if often used with MVC, where the view controller is the observer and the model is the subject. This allows the model to communicate changes back to the view controller without needing to know anything about the view controlelr’s type. Thereby, different view controllers can use and observer changes on a shared model type.</p>
<h3 id="Builder-Pattern"><a href="#Builder-Pattern" class="headerlink" title="Builder Pattern"></a>Builder Pattern</h3><p>The builder pattern allows you to create complex objects by providing inputs step-by-step, instead of requiring all inputs unfront via an initializer.<br><img src="https://i.imgur.com/IapBqzk.png" alt="Imgur"></p>
<ol>
<li>The <strong>director</strong> accepts inputs and coordinates with the builder. This is usually a view controller or a helper class that’s used by a view controller.</li>
<li>The <strong>product</strong> is the complex object to be created. This can be either a struct or a class, depending on desired references semantics. It’s usually a model, but it can be any type depending on your use case.</li>
<li>The <strong>builder</strong> accepts step-by-step inputs and handles the creation of the product. This is often a class, so it can be reused by reference.</li>
</ol>
<p>The builder pattern works best for creating complex products that require multiple inputs using a series of steps. If your product doesn’t have several inputs or can’t be created step by step, the builder pattern may be more trouble than it’s worth.<br>Instead, consider providing convenience initializers to create the product.</p>
<hr>
<h3 id="Model-View-ViewModel-Pattern"><a href="#Model-View-ViewModel-Pattern" class="headerlink" title="Model-View-ViewModel Pattern"></a>Model-View-ViewModel Pattern</h3><p><img src="https://i.imgur.com/Quf8aUU.png" alt="Imgur"></p>
<ul>
<li><strong>Models</strong> hold app data. They’are usually structs or simple classes.</li>
<li><strong>Views</strong> display visual elements and controls on the screen. They’re typically subclasses of UIView</li>
<li><strong>View models</strong> transform model information into values that can be displayes on a view. They’re usually classes, so they can be passed around as references.</li>
</ul>
<p>It’s very similar to MVC. Note that the class diagram at the top of this page includes a view controller; view controller do exist in MVVM, but their role is minimized.<br>Use this pattern when you need to transform models into another representation for a view. For example, you can use a view model to transform a Date into a date-formatted String, a Decimal into a currency-formatted String, or many other useful transformations.<br>This pattern complements MVC especially well. Without view models, you’d likely put model-to-view transformation code in your view controller. However, view controllers are already doing quite a bit: handling viewDidLoad and other view lifecycle events, handling view callbacks via IBActions and several other tasks as well.</p>
<hr>
<h3 id="Factory-Pattern"><a href="#Factory-Pattern" class="headerlink" title="Factory Pattern"></a>Factory Pattern</h3><p>The factory pattern is a creational pattern that provides a way to make objects without exposing creation logic.<br><img src="https://i.imgur.com/1iqGxoo.png" alt="Imgur"></p>
<ol>
<li>The factory creates objects.</li>
<li>The products are the objects that are created.</li>
</ol>
<p>Technically, there are multiple “flavors” of this pattern, including simple factory, abstrat factory and others. However, each of these share a common goal: to isolate object creation logic within its own construct.<br>Use the factory pattern whenever you want to separate out product creation logic, instead of having consumers create products directly.<br>Example: You’ll create a factory to generate job response emails.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">JobApplicant</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> email: <span class="type">String</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> status: <span class="type">Status</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">Status</span> </span>&#123;</span><br><span class="line">        <span class="keyword">case</span> new</span><br><span class="line">        <span class="keyword">case</span> interview</span><br><span class="line">        <span class="keyword">case</span> hired</span><br><span class="line">        <span class="keyword">case</span> rejected</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">Email</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> subject: <span class="type">String</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> messageBody: <span class="type">String</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> recipientEmail: <span class="type">String</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> senderEmail: <span class="type">String</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Here, you’ve defined JopApplicant and Email models. An applicant has a name, email, and four types of status. </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">EmailFactory</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> senderEmail: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">createEmail</span><span class="params">(to recipient: JobApplication)</span></span> -&gt; <span class="type">Email</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> subject: <span class="type">String</span></span><br><span class="line">        <span class="keyword">let</span> messageBody: <span class="type">String</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">switch</span> recipient.status &#123;</span><br><span class="line">        <span class="keyword">case</span> .new:</span><br><span class="line">            subject = <span class="string">"We received your application"</span></span><br><span class="line">            messageBody = <span class="string">"""</span></span><br><span class="line"><span class="string">            Thanks for applying for a job here!</span></span><br><span class="line"><span class="string">            You should hear from us in 17~42 business days.</span></span><br><span class="line"><span class="string">            """</span></span><br><span class="line">            </span><br><span class="line">        <span class="keyword">case</span> .interview:</span><br><span class="line">            subject = <span class="string">"We want to interview you"</span></span><br><span class="line">            messageBody = <span class="string">"""</span></span><br><span class="line"><span class="string">            Thanks for your resume, \(recipient.name)</span></span><br><span class="line"><span class="string">            Can you come in for an interview in 30 minutes?</span></span><br><span class="line"><span class="string">            """</span></span><br><span class="line">            </span><br><span class="line">        <span class="keyword">case</span> .hired:</span><br><span class="line">            subject = <span class="string">"We want to hire you"</span></span><br><span class="line">            messageBody = <span class="string">"""</span></span><br><span class="line"><span class="string">            Congratulations, \(recipient.name)</span></span><br><span class="line"><span class="string">            We liked your code, and you smelled nice.</span></span><br><span class="line"><span class="string">            We want to offer you a position! Cha-ching!</span></span><br><span class="line"><span class="string">            """</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">case</span> .rejected:</span><br><span class="line">            subject = <span class="string">"Thanks for your application"</span></span><br><span class="line">            messageBody = <span class="string">"""</span></span><br><span class="line"><span class="string">            Thank you for applying, \(recipient.name)</span></span><br><span class="line"><span class="string">            We have decided to move forword with other candidates.</span></span><br><span class="line"><span class="string">            Please remember to wear pants next time!</span></span><br><span class="line"><span class="string">            """</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="type">Email</span>(subject: subject, messageBody: messageBody, recipientEmail: recipient.email, senderEmail: senderEmail)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Now the email templates have been constructed, it’s time to use your factory on a prospective applicant!</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> jackson = <span class="type">JobApplication</span>(name: <span class="string">"Jackson Smith"</span>, email: <span class="string">"jackSmith@gmail.com"</span>, status: .new)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> emailFactory = <span class="type">EmailFactory</span>(senderEmail: <span class="string">"RaysMinions@RasysCoffeeCo.com"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// New</span></span><br><span class="line"><span class="built_in">print</span>(emailFactory.createEmail(to: jackson))</span><br><span class="line"></span><br><span class="line"><span class="comment">// Interview</span></span><br><span class="line">jackson.status = .interview</span><br><span class="line"><span class="built_in">print</span>(emailFactory.createEmail(to: jackson))</span><br></pre></td></tr></table></figure>
<p>Here, you’re creating a new <code>JobApplicant</code> named “Jackson Smith”. Next, you create a new <code>EmailFactory</code> instance, and finally, you use the instance to genenrate emails based on the JobApplicant object status property.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ziyochiro.github.io/2019/12/16/Protocol-extension/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ziyochiro">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ziyochiro's Blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/16/Protocol-extension/" itemprop="url">Protocol extension</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-16T14:07:45+08:00">
                2019-12-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2019-12-16T14:07:45+08:00">
                2019-12-16
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/swift/" itemprop="url" rel="index">
                    <span itemprop="name">swift</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="What-is-Protocol-extensions"><a href="#What-is-Protocol-extensions" class="headerlink" title="What is Protocol extensions?"></a>What is Protocol extensions?</h3><p>Extending a protocol means that you can offer default implementations to a protocol so that types don’t have to implement certain methods.<br>Below, I will create a weapon protocol, <strong>NOT</strong> class.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Weapon</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="keyword">var</span> canFire: <span class="type">Bool</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="keyword">var</span> cunCut: <span class="type">Bool</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Then, consider we have 2 types of weapons: fireable, cuttable. We will use these abilities with weapon protocol to create weapons as we want.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Fireable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> bulletSize: <span class="type">Int</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Cuttable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> weight: <span class="type">Double</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="keyword">var</span> steel: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>We created abilities and our Weapon protocol. Let’s create structs using all these.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// longSword is a weapon with ability to cut.</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LongSword</span>: <span class="title">Weapon</span>, <span class="title">Cuttable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">let</span> steel: <span class="type">String</span></span><br><span class="line">    <span class="keyword">let</span> weight = <span class="number">7.2</span></span><br><span class="line">    <span class="keyword">let</span> canFire = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">let</span> canCut = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// M416 is a weapon with ability to fire bullets.</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">M416</span>: <span class="title">Weapon</span>, <span class="title">Fireable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> name = <span class="string">"M416"</span></span><br><span class="line">    <span class="keyword">let</span> bulletSize = <span class="number">5.56</span></span><br><span class="line">    <span class="keyword">let</span> canFire = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">let</span> canCut = <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p> <strong>var or let</strong><br>Whenever you declare properties on a protocol, they are always a var. The implementer can then choose to make it a <code>let</code> or <code>var</code> property. Also, if the protocol has a <code>get</code> <code>set</code> modifier on a property, the implementer has to offer a <code>var</code> to allow for mutation.</p>
</blockquote>
<p>As you can see above, we decorated our structs using protocols. Protocols force us to conform to them and also we add the ability we want. But a problem occurred above which is about holding <code>canFire</code> and <code>canCut</code> abilities at our custom structs. What can we do to fixt this? Answer is <strong>Protocol Extension :]</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Weapon</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> canFire: <span class="type">Bool</span> &#123; <span class="keyword">return</span> <span class="keyword">self</span> <span class="keyword">is</span> <span class="type">Fireable</span> &#125;</span><br><span class="line">    <span class="keyword">var</span> canCut: <span class="type">Bool</span> &#123; <span class="keyword">return</span> <span class="keyword">self</span> <span class="keyword">is</span> <span class="type">Cuttable</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Then, remove all <code>canFire</code> and <code>canCut</code> variables from <code>Weapon Protocol</code>, <code>Longsword</code>, and <code>M416</code>. </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> longClaw = <span class="type">LongSword</span>(name: <span class="string">"Longclaw"</span>, steel: <span class="string">"Valyrian"</span>)</span><br><span class="line">longclaw.canCut <span class="comment">// true</span></span><br><span class="line">longclaw.canFrie <span class="comment">// false</span></span><br><span class="line">longclaw.name</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> m416 = <span class="type">M416</span>()</span><br><span class="line">m416.canFire <span class="comment">// true</span></span><br><span class="line">m416.canCut <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>A default implementation on a protocol is always added via an extension.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ziyochiro.github.io/2019/12/16/Toast-for-MacOS-App/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ziyochiro">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ziyochiro's Blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/16/Toast-for-MacOS-App/" itemprop="url">Toast for MacOS App</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-16T09:17:23+08:00">
                2019-12-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2019-12-16T09:17:23+08:00">
                2019-12-16
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/objective-c/" itemprop="url" rel="index">
                    <span itemprop="name">objective-c</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="One-line-toast"><a href="#One-line-toast" class="headerlink" title="One line toast:"></a>One line toast:</h2><p><img src="https://i.imgur.com/v5DU5rI.png" alt="Imgur"></p>
<h2 id="Multiple-lines-toast"><a href="#Multiple-lines-toast" class="headerlink" title="Multiple lines toast:"></a>Multiple lines toast:</h2><p><img src="https://i.imgur.com/5N5xhAN.png" alt="Imgur"></p>
<hr>
<h2 id="EMRToast-m"><a href="#EMRToast-m" class="headerlink" title="EMRToast.m"></a>EMRToast.m</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">import</span> "EMRToast.h"</span><br><span class="line">#<span class="keyword">import</span> "EMRToastTextCell.h"</span><br><span class="line"></span><br><span class="line">@interface <span class="type">EMRToast</span>() &#123;</span><br><span class="line">    <span class="type">NSTextField</span> *contentLabel;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation <span class="type">EMRToast</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">+ (void)<span class="type">Show</span>:(<span class="type">NSString</span> *)text &#123;</span><br><span class="line">    <span class="comment">// create a toast</span></span><br><span class="line">    <span class="type">CGFloat</span> parentWidth = [<span class="type">NSApplication</span> sharedApplication].windows[<span class="number">0</span>].frame.size.width;</span><br><span class="line">    <span class="type">CGRect</span> frame = <span class="type">CGRectMake</span>(<span class="number">0</span>, <span class="number">20</span>, parentWidth, <span class="number">100</span>);  <span class="comment">// make the toast hight big enough to show multiple lines</span></span><br><span class="line">    <span class="type">EMRToast</span> *toast = [[<span class="type">EMRToast</span> alloc] initWithFrame:frame text:text];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// add toast to window</span></span><br><span class="line">    [[<span class="type">NSApplication</span> sharedApplication].keyWindow.contentView addSubview:toast];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// make toast center in the bottom</span></span><br><span class="line">    <span class="type">NSLayoutConstraint</span> *makeToastCenter = [<span class="type">NSLayoutConstraint</span> constraintWithItem:toast</span><br><span class="line">                                                                       attribute:<span class="type">NSLayoutAttributeCenterX</span></span><br><span class="line">                                                                       relatedBy:<span class="type">NSLayoutRelationEqual</span></span><br><span class="line">                                                                          toItem:[toast superview]</span><br><span class="line">                                                                       attribute:<span class="type">NSLayoutAttributeCenterX</span></span><br><span class="line">                                                                      multiplier:<span class="number">1</span></span><br><span class="line">                                                                        constant:<span class="number">0</span>];</span><br><span class="line">    [[toast superview] addConstraint:makeToastCenter];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (instancetype)initWithFrame:(<span class="type">NSRect</span>)frame text:(<span class="type">NSString</span> *)text</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> initWithFrame:frame];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</span><br><span class="line">        [<span class="keyword">self</span> config:text];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)config:(<span class="type">NSString</span> *)text &#123;</span><br><span class="line">    <span class="comment">// Add a label to toast</span></span><br><span class="line">    contentLabel = [[<span class="type">NSTextField</span> alloc] initWithFrame:<span class="type">CGRectMake</span>(<span class="number">20</span>, <span class="number">0</span>, (<span class="keyword">self</span>.bounds.size.width - <span class="number">40</span>), <span class="number">50</span>)];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// use customTextCell</span></span><br><span class="line">    contentLabel.cell = [[<span class="type">EMRToastTextCell</span> alloc] initTextCell:text];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// label property</span></span><br><span class="line">    contentLabel.backgroundColor = [<span class="type">NSColor</span> clearColor];</span><br><span class="line">    contentLabel.textColor = [<span class="type">NSColor</span> whiteColor];</span><br><span class="line">    contentLabel.font = [<span class="type">NSFont</span> systemFontOfSize:<span class="number">15</span>];</span><br><span class="line">    contentLabel.alignment = <span class="type">NSTextAlignmentCenter</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// size and frame</span></span><br><span class="line">    <span class="type">CGSize</span> size = [contentLabel sizeThatFits:<span class="type">CGSizeMake</span>(<span class="keyword">self</span>.bounds.size.width - <span class="number">40</span>, <span class="number">50</span>)];</span><br><span class="line">    contentLabel.frame = <span class="type">CGRectMake</span>((<span class="keyword">self</span>.bounds.size.width - size.width)/<span class="number">2</span>, <span class="number">0</span>, size.width + <span class="number">20</span>, size.height + <span class="number">20</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// round corner</span></span><br><span class="line">    contentLabel.bordered = <span class="type">YES</span>;</span><br><span class="line">    contentLabel.wantsLayer = <span class="type">YES</span>;</span><br><span class="line">    contentLabel.layer.borderColor = [<span class="type">NSColor</span> grayColor].<span class="type">CGColor</span>;</span><br><span class="line">    contentLabel.layer.borderWidth = <span class="number">2</span>.0f;</span><br><span class="line">    contentLabel.layer.cornerRadius = <span class="number">7</span>.0f;</span><br><span class="line">    <span class="keyword">if</span> ([text containsString:@<span class="string">"\n"</span>]) &#123;</span><br><span class="line">        contentLabel.layer.cornerRadius = <span class="number">10</span>.0f;</span><br><span class="line">    &#125;</span><br><span class="line">    contentLabel.layer.masksToBounds = <span class="type">YES</span>;</span><br><span class="line">    contentLabel.layer.backgroundColor = [<span class="type">NSColor</span> grayColor].<span class="type">CGColor</span>;</span><br><span class="line">    [[contentLabel cell] setBezeled:<span class="type">NO</span>];   <span class="comment">// must set this to NO;</span></span><br><span class="line">    [[contentLabel cell] setBordered:<span class="type">NO</span>];  <span class="comment">// must set this to NO;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ToastView add label as subview</span></span><br><span class="line">    [<span class="keyword">self</span> addSubview:contentLabel];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// label constraints</span></span><br><span class="line">    [<span class="keyword">self</span> setTranslatesAutoresizingMaskIntoConstraints:<span class="type">NO</span>];</span><br><span class="line">    <span class="type">NSLayoutConstraint</span> *makeLabelCenter = [<span class="type">NSLayoutConstraint</span> constraintWithItem:contentLabel</span><br><span class="line">                                                                       attribute:<span class="type">NSLayoutAttributeCenterX</span></span><br><span class="line">                                                                       relatedBy:<span class="type">NSLayoutRelationEqual</span></span><br><span class="line">                                                                          toItem:<span class="keyword">self</span></span><br><span class="line">                                                                       attribute:<span class="type">NSLayoutAttributeCenterX</span></span><br><span class="line">                                                                      multiplier:<span class="number">1</span></span><br><span class="line">                                                                        constant:<span class="number">0</span>];</span><br><span class="line">    [<span class="keyword">self</span> addConstraint:makeLabelCenter];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// dismiss the toast after 2 seconds</span></span><br><span class="line">    [<span class="keyword">self</span> performSelector:@selector(dismiss) withObject:<span class="literal">nil</span> afterDelay:<span class="number">2</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (void)dismiss &#123;</span><br><span class="line">    [<span class="type">NSAnimationContext</span> runAnimationGroup:^(<span class="type">NSAnimationContext</span> * _Nonnull context) &#123;</span><br><span class="line">        context.duration = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">self</span>.animator.alphaValue = <span class="number">0</span>;</span><br><span class="line">    &#125; completionHandler:^&#123;</span><br><span class="line">        [<span class="keyword">self</span> removeFromSuperview];</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<h2 id="EMRToastTextCell-m"><a href="#EMRToastTextCell-m" class="headerlink" title="EMRToastTextCell.m"></a>EMRToastTextCell.m</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">import</span> "EMRToastTextCell.h"</span><br><span class="line"></span><br><span class="line">@implementation <span class="type">EMRToastTextCell</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// make text content centered vertically</span></span><br><span class="line">- (<span class="type">NSRect</span>)drawingRectForBounds:(<span class="type">NSRect</span>)rect &#123;</span><br><span class="line">    <span class="type">NSRect</span> newRect = [<span class="keyword">super</span> drawingRectForBounds:rect];</span><br><span class="line">    <span class="type">NSSize</span> textSize = [<span class="keyword">self</span> cellSizeForBounds:rect];</span><br><span class="line">    <span class="type">CGFloat</span> deltaHight = newRect.size.height - textSize.height;</span><br><span class="line">    <span class="keyword">if</span> (deltaHight &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        newRect.size.height = textSize.height;</span><br><span class="line">        newRect.origin.y += deltaHight * <span class="number">0.5</span>;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newRect;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>

<h2 id="How-to-use-a-toast"><a href="#How-to-use-a-toast" class="headerlink" title="How to use a toast"></a>How to use a toast</h2><p>In <code>ViewController.m</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">import</span> "ViewController.h"</span><br><span class="line">#<span class="keyword">import</span> "EMRToast.h"</span><br><span class="line">@interface <span class="type">ViewController</span>() &#123;</span><br><span class="line">    <span class="type">NSButton</span> *showToastButton;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation <span class="type">ViewController</span></span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    showToastButton = [<span class="type">NSButton</span> buttonWithTitle:@<span class="string">"ShowToast"</span> target:<span class="keyword">self</span> action:@selector(showToastAction)];</span><br><span class="line">    showToastButton.frame = <span class="type">CGRectMake</span>(<span class="number">50</span>, <span class="number">200</span>, <span class="number">200</span>, <span class="number">50</span>);</span><br><span class="line">    [<span class="keyword">self</span>.view addSubview:showToastButton];</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)showToastAction &#123;</span><br><span class="line">    <span class="comment">// one line</span></span><br><span class="line">    <span class="comment">//[EMRToast Show:@"This is a toast!"];</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// multiple line</span></span><br><span class="line">    [<span class="type">EMRToast</span> <span class="type">Show</span>:@<span class="string">"The blatant disparity between software \n theory and practice befuddles many \n Computer Science students."</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ziyochiro.github.io/2019/12/13/MacOS-development-Get-device-and-system-information/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ziyochiro">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ziyochiro's Blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/13/MacOS-development-Get-device-and-system-information/" itemprop="url">MacOS development: Get device and system information</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-13T09:23:23+08:00">
                2019-12-13
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2019-12-13T09:23:23+08:00">
                2019-12-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/objective-c/" itemprop="url" rel="index">
                    <span itemprop="name">objective-c</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Device-Model"><a href="#Device-Model" class="headerlink" title="Device Model"></a>Device Model</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">NSString</span> *)getDeviceModel &#123;</span><br><span class="line">        size_t len = <span class="number">0</span>;</span><br><span class="line">        sysctlbyname(<span class="string">"hw.model"</span>, <span class="type">NULL</span>, &amp;len, <span class="type">NULL</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (len)</span><br><span class="line">        &#123;</span><br><span class="line">            char *model = malloc(len*<span class="built_in">sizeof</span>(char));</span><br><span class="line">            sysctlbyname(<span class="string">"hw.model"</span>, model, &amp;len, <span class="type">NULL</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="type">NSString</span> *model_ns = [<span class="type">NSString</span> stringWithUTF8String:model];</span><br><span class="line">            free(model);</span><br><span class="line">            <span class="keyword">return</span> model_ns;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> @<span class="string">"Just an Apple Computer"</span>; <span class="comment">//incase model name can't be read</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Output:</span><br><span class="line">Macbookpro13,<span class="number">1</span></span><br></pre></td></tr></table></figure>
<h1 id="System-Version"><a href="#System-Version" class="headerlink" title="System Version"></a>System Version</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">NSString</span> *)getSystemVersion &#123;</span><br><span class="line">    <span class="type">NSOperatingSystemVersion</span> version = [[<span class="type">NSProcessInfo</span> processInfo] operatingSystemVersion];</span><br><span class="line">    <span class="type">NSString</span>* major = [<span class="type">NSString</span> stringWithFormat:@<span class="string">"%ld"</span>, (long)version.majorVersion];</span><br><span class="line">    <span class="type">NSString</span>* minor = [<span class="type">NSString</span> stringWithFormat:@<span class="string">"%ld"</span>, (long)version.minorVersion];</span><br><span class="line">    <span class="type">NSString</span>* patch = [<span class="type">NSString</span> stringWithFormat:@<span class="string">"%ld"</span>, (long)version.patchVersion];</span><br><span class="line">    <span class="keyword">return</span> [<span class="type">NSString</span> stringWithFormat:@<span class="string">"%@.%@.%@"</span>, major, minor, patch];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Output:</span></span><br><span class="line"><span class="number">10.15</span><span class="number">.0</span></span><br></pre></td></tr></table></figure>
<h1 id="System-Name"><a href="#System-Name" class="headerlink" title="System Name"></a>System Name</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">NSString</span> *)getSystemName &#123;</span><br><span class="line">    <span class="type">NSDictionary</span> *dict = [<span class="type">NSDictionary</span> dictionaryWithContentsOfFile:@<span class="string">"/System/Library/CoreServices/Setup Assistant.app/Contents/Resources/en.lproj/Localizable.strings"</span>];</span><br><span class="line">    <span class="type">NSString</span> *productName = [dict objectForKey:@<span class="string">"INSTALLATION_COMPLETE"</span>];</span><br><span class="line">    <span class="keyword">if</span> (productName) &#123;</span><br><span class="line">        <span class="type">NSRange</span> r = [productName rangeOfString:@<span class="string">" has been"</span>];</span><br><span class="line">        <span class="keyword">if</span> (r.location != <span class="type">NSNotFound</span>) &#123;</span><br><span class="line">            productName = [productName substringToIndex:r.location];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            productName = <span class="literal">nil</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> productName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">Output:</span></span><br><span class="line">macOS</span><br></pre></td></tr></table></figure>
<h1 id="Share-Network-Name"><a href="#Share-Network-Name" class="headerlink" title="Share Network Name"></a>Share Network Name</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">NSString</span> *)getShareNetworkName &#123;</span><br><span class="line">    <span class="keyword">return</span> [[<span class="type">NSHost</span> currentHost] localizedName];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">Output:</span></span><br><span class="line">Rm</span><br></pre></td></tr></table></figure>
<h1 id="Serial-Number"><a href="#Serial-Number" class="headerlink" title="Serial Number"></a>Serial Number</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="type">NSString</span> *) getHardwareSerialNumber</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">NSString</span> * ret = <span class="literal">nil</span>;</span><br><span class="line">    io_service_t platformExpert ;</span><br><span class="line">    platformExpert = <span class="type">IOServiceGetMatchingService</span>(kIOMasterPortDefault, <span class="type">IOServiceMatching</span>(<span class="string">"IOPlatformExpertDevice"</span>)) ;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (platformExpert)    &#123;</span><br><span class="line">        <span class="type">CFTypeRef</span> uuidNumberAsCFString ;</span><br><span class="line">        uuidNumberAsCFString = <span class="type">IORegistryEntryCreateCFProperty</span>(platformExpert, <span class="type">CFSTR</span>(<span class="string">"IOPlatformSerialNumber"</span>), kCFAllocatorDefault, <span class="number">0</span>) ;</span><br><span class="line">        <span class="keyword">if</span> (uuidNumberAsCFString)    &#123;</span><br><span class="line">            ret = [(__bridge <span class="type">NSString</span> *)(<span class="type">CFStringRef</span>)uuidNumberAsCFString copy];</span><br><span class="line">            <span class="type">CFRelease</span>(uuidNumberAsCFString); uuidNumberAsCFString = <span class="type">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">IOObjectRelease</span>(platformExpert); platformExpert = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Output:</span><br><span class="line">C07ABCEFGHIJ <span class="comment">// SOMETHING LIKE THIS</span></span><br></pre></td></tr></table></figure>
<h1 id="UUID"><a href="#UUID" class="headerlink" title="UUID"></a>UUID</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">NSString</span> *)getUUID</span><br><span class="line">&#123;</span><br><span class="line">    io_registry_entry_t ioRegistryRoot = <span class="type">IORegistryEntryFromPath</span>(kIOMasterPortDefault, <span class="string">"IOService:/"</span>);</span><br><span class="line">    <span class="type">CFStringRef</span> uuidCf = (<span class="type">CFStringRef</span>) <span class="type">IORegistryEntryCreateCFProperty</span>(ioRegistryRoot, <span class="type">CFSTR</span>(kIOPlatformUUIDKey), kCFAllocatorDefault, <span class="number">0</span>);</span><br><span class="line">    <span class="type">IOObjectRelease</span>(ioRegistryRoot);</span><br><span class="line">    <span class="type">NSString</span> * uuid = (__bridge <span class="type">NSString</span> *)uuidCf;</span><br><span class="line">    <span class="type">CFRelease</span>(uuidCf);</span><br><span class="line">    <span class="keyword">return</span> uuid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Output:</span><br><span class="line"><span class="number">70</span>A46D95<span class="number">-19</span>C4<span class="number">-41</span>AB-FS74-BC124EF15051  <span class="comment">// SOMETHING LIKE THIS</span></span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ziyochiro.github.io/2019/12/06/How-to-build-a-static-library/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ziyochiro">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ziyochiro's Blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/06/How-to-build-a-static-library/" itemprop="url">How to build a static library</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-06T18:29:48+08:00">
                2019-12-06
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2019-12-06T18:29:48+08:00">
                2019-12-06
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/objective-c/" itemprop="url" rel="index">
                    <span itemprop="name">objective-c</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Step-1-Start-with-a-new-project"><a href="#Step-1-Start-with-a-new-project" class="headerlink" title="Step 1 Start with a new project"></a>Step 1 Start with a new project</h3><h4 id="Create-a-new-project-choose-iOS-→-Static-Library-→-Next"><a href="#Create-a-new-project-choose-iOS-→-Static-Library-→-Next" class="headerlink" title="Create a new project, choose iOS → Static Library → Next."></a>Create a new project, choose iOS → Static Library → Next.</h4><p><img src="https://i.imgur.com/B3UINZj.png" alt="Imgur"></p>
<h4 id="Enter-the-Product-Name-and-click-Next"><a href="#Enter-the-Product-Name-and-click-Next" class="headerlink" title="Enter the Product Name and click Next."></a>Enter the Product Name and click Next.</h4><p><img src="https://i.imgur.com/ZjBpiS0.png" alt="Imgur"></p>
<p>Then you will see two files and ‘liboutputLog.a’ file that Xcode automatically generates for you .<br><img src="https://i.imgur.com/mazUcib.png" alt="Imgur"></p>
<h3 id="Step2-Add-some-contents-and-build"><a href="#Step2-Add-some-contents-and-build" class="headerlink" title="Step2 Add some contents and build"></a>Step2 Add some contents and build</h3><h4 id="In-‘outpuLog-h’-file-add-a-new-method-‘printSomething’"><a href="#In-‘outpuLog-h’-file-add-a-new-method-‘printSomething’" class="headerlink" title="In ‘outpuLog.h’ file, add a new method ‘printSomething’;"></a>In ‘outpuLog.h’ file, add a new method ‘printSomething’;</h4><p><img src="https://i.imgur.com/3Z8ZRB4.png" alt="Imgur"></p>
<h4 id="Then-implement-that-method-in-‘outputLog-m’-file"><a href="#Then-implement-that-method-in-‘outputLog-m’-file" class="headerlink" title="Then implement that method in ‘outputLog.m’ file."></a>Then implement that method in ‘outputLog.m’ file.</h4><p>This method will only print some tests in the cosole.<br><img src="https://i.imgur.com/yr1omix.png" alt="Imgur"></p>
<h4 id="Choose-platform-Mac-real-device-or-Simulators-and-Click-the-build-button"><a href="#Choose-platform-Mac-real-device-or-Simulators-and-Click-the-build-button" class="headerlink" title="Choose platform (Mac, real device, or Simulators) and Click the build button."></a>Choose platform (Mac, real device, or Simulators) and Click the build button.</h4><p>I choose the Simulator, I can test the library later in a iPhone 8 Simulator.<br><img src="https://i.imgur.com/GKn9P4K.png" alt="Imgur"></p>
<h4 id="After-building-you-can-find-the-‘liboutputLog-a’-file-in-Finder"><a href="#After-building-you-can-find-the-‘liboutputLog-a’-file-in-Finder" class="headerlink" title="After building, you can find the ‘liboutputLog.a’ file in Finder."></a>After building, you can find the ‘liboutputLog.a’ file in Finder.</h4><p><img src="https://i.imgur.com/DpNgMTG.png" alt="Imgur"></p>
<h3 id="Step3-Add-the-static-library-to-a-pject"><a href="#Step3-Add-the-static-library-to-a-pject" class="headerlink" title="Step3 Add the static library to a pject."></a>Step3 Add the static library to a pject.</h3><p>Open you project, and prepare to add the ‘liboutputLog.a’ to project.</p>
<h4 id="Find-this-two-file-a-head-file-and-a-file"><a href="#Find-this-two-file-a-head-file-and-a-file" class="headerlink" title="Find this two file: a head file and .a file."></a>Find this two file: a head file and .a file.</h4><p><img src="https://i.imgur.com/DqKTgWj.png" alt="Imgur"></p>
<h4 id="Drag-these-2-files-to-your-project"><a href="#Drag-these-2-files-to-your-project" class="headerlink" title="Drag these 2 files to your project."></a>Drag these 2 files to your project.</h4><p><img src="https://i.imgur.com/oOR0fte.png" alt="Imgur"></p>
<p>When you add these 2 files, remember to check 3 items:<br><img src="https://i.imgur.com/MjX0x5F.png" alt="Imgur"></p>
<p>At this step, you’ve already create and add the ‘liboutputLog.a’ static library to your target project. </p>
<h4 id="Next-use-the-method-in-static-library"><a href="#Next-use-the-method-in-static-library" class="headerlink" title="Next, use the method in static library."></a>Next, use the method in static library.</h4><p>Import the ‘outputLog.h’ in ViewController, and call the method when the view loads.<br><img src="https://i.imgur.com/deAmE5G.png" alt="Imgur"></p>
<p>Choose Simulator as build target and Run, you’ll see some texts been printed out in cosole.<br>(If your static library’s build target is real device, then your project should test on a real device instead of simulator )<br><img src="https://i.imgur.com/TtRpx2t.png" alt="Imgur"></p>
<p>All done !</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ziyochiro.github.io/2019/12/05/Creating-a-Mac-version-of-Your-iPhone-App/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ziyochiro">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ziyochiro's Blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/05/Creating-a-Mac-version-of-Your-iPhone-App/" itemprop="url">Creating a Mac version of Your iPhone App</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-05T17:36:40+08:00">
                2019-12-05
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2019-12-05T17:36:40+08:00">
                2019-12-05
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/objective-c/" itemprop="url" rel="index">
                    <span itemprop="name">objective-c</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Link: <a href="https://developer.apple.com/mac-catalyst/" target="_blank" rel="noopener">mac-catalyst</a><br>Requirements:</p>
<ul>
<li>Xcode11 and later</li>
<li>MacOS 10.15 and later</li>
</ul>
<hr>
<p>做了一个简单的 iOS App Demo， 只有一个ViewController, 两个按钮以及两个label，如下图所示：<br><img src="https://i.imgur.com/sb6CiIN.png" alt="Imgur"><br>如果你想要把它转变为Mac应用，而又不想再写一套针对Mac的Code，你可以通过使用 Mac-Catalyst<br>这个工具来完成，简单又快捷。</p>
<h1 id="Pre-Setting"><a href="#Pre-Setting" class="headerlink" title="Pre-Setting"></a>Pre-Setting</h1><h2 id="Step1"><a href="#Step1" class="headerlink" title="Step1"></a>Step1</h2><p>在 Target Device，将 Mac option 勾选上。<br><img src="https://i.imgur.com/6nhG5qq.png" alt="Imgur"></p>
<h2 id="Step2"><a href="#Step2" class="headerlink" title="Step2"></a>Step2</h2><p>正常情况下，代码是可以直接在你的Mac上运行的，但是你也许会遇到这种情况：程序无法在Mac上运行，因为你的Mac缺少一些 architecture ，<code>My Mac doesn&#39;t support any of HelloWorldDemo-mobile app&#39;s architectures. You can add My Mac&#39;s x86_64h architecture to HelloWorldDemo-mobile.app&#39;s Architectures build setting.</code><br><img src="https://i.imgur.com/6lT650T.png" alt="Imgur"><br>你可以通过手动添加‘i386’ ‘x86_64’ 到Valid Architectures来修复。<br><img src="https://i.imgur.com/ZF5fliq.png" alt="Imgur"></p>
<h1 id="Window-settings"><a href="#Window-settings" class="headerlink" title="Window settings"></a>Window settings</h1><p>默认情况下，通过鼠标拖拽，你可以改变Mac应用的窗口大小。<br><img src="https://i.imgur.com/2NBArN5.png" alt="Imgur"><br><img src="https://i.imgur.com/sTvhdkh.png" alt="Imgur"><br>或者，你也可以通过添加以下代码让窗口的大小固定。注意 window 和 window scene 的区别。<br><img src="https://i.imgur.com/lwVLWaj.png" alt="Imgur"><br><code>TARGET_OS_MACCATALYST</code> allows you to exclude some code from Mac or iOS.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    <span class="keyword">self</span>.view.backgroundColor = [<span class="type">UIColor</span> whiteColor];</span><br><span class="line">    #<span class="keyword">if</span> !<span class="type">TARGET_OS_MACCATALYST</span></span><br><span class="line">        <span class="type">NSLog</span>(@“—codes only run on iPhone”);</span><br><span class="line">        <span class="comment">// code here</span></span><br><span class="line">    #endif</span><br><span class="line">    </span><br><span class="line">    #<span class="keyword">if</span> <span class="type">TARGET_OS_MACCATALYST</span></span><br><span class="line">        <span class="type">NSLog</span>(@“—codes only run on <span class="type">Mac</span>”);</span><br><span class="line">        <span class="comment">// code here</span></span><br><span class="line">    #endif</span><br><span class="line">    </span><br><span class="line">    <span class="type">NSLog</span>(@<span class="string">"--run on both iPhone and Mac”);</span></span><br><span class="line"><span class="string">    // code here</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ziyochiro.github.io/2019/11/22/blogrules/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ziyochiro">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ziyochiro's Blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/22/blogrules/" itemprop="url">blogrules</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-22T17:32:40+08:00">
                2019-11-22
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2019-11-22T17:32:40+08:00">
                2019-11-22
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tools/" itemprop="url" rel="index">
                    <span itemprop="name">tools</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="插入图片测试"><a href="#插入图片测试" class="headerlink" title="插入图片测试"></a>插入图片测试</h3><p><img src="https://i.imgur.com/eqM6czF.png?2" alt="pets&#39;s food"></p>
<p><img src="https://i.imgur.com/q15SsH7.png" alt="test"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Ziyochiro</p>
              <p class="site-description motion-element" itemprop="description">My blogs</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ziyochiro</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
